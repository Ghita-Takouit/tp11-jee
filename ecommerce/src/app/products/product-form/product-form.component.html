<div class="container">
  <h2>{{ isEditMode ? 'Modifier' : 'Ajouter' }} un Produit</h2>
  
  <form (ngSubmit)="onSubmit()" #productForm="ngForm">
    <div class="form-group">
      <label for="name">Nom *</label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        [(ngModel)]="product.name" 
        required 
        #nameInput="ngModel"
        class="form-control"
      >
      @if (nameInput.invalid && nameInput.touched) {
        <span class="error">Le nom est obligatoire</span>
      }
    </div>
    
    <div class="form-group">
      <label for="price">Prix (MAD) *</label>
      <input 
        type="number" 
        id="price" 
        name="price" 
        [(ngModel)]="product.price" 
        required 
        min="0"
        step="0.01"
        #priceInput="ngModel"
        class="form-control"
      >
      @if (priceInput.invalid && priceInput.touched) {
        <span class="error">Le prix est obligatoire</span>
      }
    </div>
    
    <div class="form-group">
      <label for="stock">Stock *</label>
      <input 
        type="number" 
        id="stock" 
        name="stock" 
        [(ngModel)]="product.stock" 
        required 
        min="0"
        #stockInput="ngModel"
        class="form-control"
      >
      @if (stockInput.invalid && stockInput.touched) {
        <span class="error">Le stock est obligatoire</span>
      }
    </div>
    
    <div class="form-group">
      <label for="category">Catégorie</label>
      <select 
        id="category" 
        name="category" 
        [(ngModel)]="selectedCategoryId"
        class="form-control"
      >
        <option [ngValue]="null">-- Sélectionner une catégorie --</option>
        @for (category of categories; track category.id) {
          <option [ngValue]="category.id">{{ category.name }}</option>
        }
      </select>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-save" [disabled]="productForm.invalid">
        {{ isEditMode ? 'Modifier' : 'Ajouter' }}
      </button>
      <a routerLink="/products" class="btn btn-cancel">Annuler</a>
    </div>
  </form>
</div>
